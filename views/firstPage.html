<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pandemic Response - Dashboard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="/firstPage.css" />
  <link rel="stylesheet" href="/sidebar.css" />
  <link rel="stylesheet" href="/weather.css">
</head>

<body>
  <!-- Sidebar (Consistent Across All Pages) -->
  <div class="logo" onclick="window.location.href='/'">
    <img src="/logo.png" alt="Pandemic Response Logo" class="logo-img" />
  </div>
  <div class="sidebar" id="sidebar">
    <div class="sidebar-links">
      <a href="/" class="sidebar-link"><i class="fa-solid fa-home"></i> Home</a>
      <a href="/firstPage" class="sidebar-link"><i class="fa-solid fa-virus"></i> Dashboard</a>
      <a href="/pandamic" class="sidebar-link"><i class="fa-solid fa-virus"></i> Live Pandemic Stats</a>
      <a href="/request" class="sidebar-link"><i class="fa-solid fa-box-open"></i> Need Resources</a>
      <a href="/map" class="sidebar-link"><i class="fa-solid fa-hospital"></i> Find Hospitals</a>
      <a href="/stats" class="sidebar-link"><i class="fa-solid fa-chart-pie"></i> Graph Analytics</a>
      <a href="/organizations" class="sidebar-link"><i class="fa-solid fa-building"></i> Organizations</a>
      <a href="/org-dashboard" class="sidebar-link"><i class="fa-solid fa-tachometer-alt"></i> Org Dashboard</a>
      <a href="/user-dashboard" class="sidebar-link"><i class="fa-solid fa-user"></i> User Dashboard</a>
      <a href="/profile" class="sidebar-link"><i class="fa-solid fa-id-card"></i> Profile</a>
    </div>
    <div class="user-profile">
      <img src="/default-user.png" alt="User Photo" id="user-photo" class="user-photo"
        onclick="toggleSidebarMobile()" />
      <div class="user-info">
        <span id="user-name">User Name</span>
        <!-- <span id="user-email">user@example.com</span> -->
      </div>
      <button class="profile-btn" onclick="window.location.href='/profile'">
        <i class="fa-solid fa-arrow-right"></i>
      </button>
    </div>
  </div>
  <div class="mobile-toggle" onclick="toggleSidebarMobile()">
    <i class="fa-solid fa-bars mobile-hamburger"></i>
  </div>

  <!-- Main Content -->
  <main class="main-content">
    <nav class="navbar">
      <a href="#hero" class="nav-link">Home</a>
      <a href="#stats" class="nav-link">Stats</a>
      <a href="#resources" class="nav-link">Resources</a>
      <a href="#faqs" class="nav-link">FAQs</a>
      <button class="volunteer-btn" onclick="openVolunteerModal()">
        <i class="fa-solid fa-handshake-angle"></i> Become a Volunteer
      </button>
    </nav>

    <section id="hero" class="hero-section">
      <div class="hero-content">
        <h1>Bridging the Gap: Dynamic Response to Pandemic Challenges</h1>
        <button class="cta-btn" onclick="scrollToSection('stats')">
          <i class="fa-solid fa-play"></i> Get Started
        </button>
      </div>
      <div class="hero-image">
        <img src="/cover.png" alt="Pandemic Response" />
      </div>
    </section>

    <section id="stats" class="stats-section">
      <h2>
        <i class="fa-solid fa-chart-line"></i> Real-Time Pandemic Statistics
      </h2>
      <div class="stats-container">
        <div class="global-stats">
          <div class="dropdown-container">
            <select id="country-select">
              <option value="" selected>Select a Country</option>
            </select>
          </div>
          <div class="country-info">
            <span id="country-name">Global</span>
            <img id="country-flag" src="" alt="" class="country-flag hidden" />
          </div>
          <div class="pandemic-data">
            <div class="stat-card">
              <i class="fa-solid fa-virus"></i> Active Cases:
              <span id="active-cases">Loading...</span>
            </div>
            <div class="stat-card">
              <i class="fa-solid fa-heart"></i> Recovered:
              <span id="recovered">Loading...</span>
            </div>
            <div class="stat-card">
              <i class="fa-solid fa-skull"></i> Deaths:
              <span id="deaths">Loading...</span>
            </div>
            <div class="stat-card">
              <i class="fa-solid fa-syringe"></i> Vaccinated:
              <span id="vaccinated">Loading...</span>
            </div>
          </div>
        </div>
        <div class="charts">
          <div class="chart-container">
            <canvas id="infectionRateChart"></canvas>
          </div>
          <div class="chart-container">
            <canvas id="resourceAvailabilityChart"></canvas>
          </div>
        </div>
      </div>
    </section>

    <section id="resources" class="card-section">
      <h2><i class="fa-solid fa-box-open"></i> More Information</h2>
      <div class="card-container">
        <div class="card" onclick="window.location.href='/request'">
          <i class="fa-solid fa-box-open card-icon"></i>
          <h3>Request Resources</h3>
          <p>
            Request essential supplies from our admins; approved requests are
            fulfilled by volunteers.
          </p>
          <button class="card-btn">
            <i class="fa-solid fa-arrow-right"></i>
          </button>
        </div>
        <div class="card" onclick="scrollToSection('stats')">
          <i class="fa-solid fa-chart-line card-icon"></i>
          <h3>Pandemic Stats</h3>
          <p>
            Explore real-time pandemic data with interactive charts for better
            insights.
          </p>
          <button class="card-btn">
            <i class="fa-solid fa-arrow-right"></i>
          </button>
        </div>
        <div class="card" onclick="window.location.href='/map'">
          <i class="fa-solid fa-hospital card-icon"></i>
          <h3>Nearby Hospitals</h3>
          <p>
            Locate hospitals near you and send alerts for immediate
            assistance.
          </p>
          <button class="card-btn">
            <i class="fa-solid fa-arrow-right"></i>
          </button>
        </div>
      </div>
    </section>

    <section id="faqs" class="faq-section">
      <h2>
        <i class="fa-solid fa-question-circle"></i> Frequently Asked Questions
      </h2>
      <div class="faq-container">
        <div class="faq-item">
          <h3>How do I request resources?</h3>
          <p>
            Click "Need Resources" in the sidebar, fill out the form, and wait
            for admin approval.
          </p>
        </div>
        <div class="faq-item">
          <h3>Can I volunteer?</h3>
          <p>
            Yes! Click "Become a Volunteer" in the navbar to join our team.
          </p>
        </div>
        <div class="faq-item">
          <h3>How are stats updated?</h3>
          <p>Data is fetched in real-time from APIs like disease.sh.</p>
        </div>
      </div>
    </section>

    <footer class="footer">
      <p>© 2025 Pandemic Response. All Rights Reserved.</p>
      <div class="footer-links">
        <a href="/privacy"><i class="fa-solid fa-lock"></i> Privacy Policy</a>
        <a href="/terms"><i class="fa-solid fa-file-contract"></i> Terms of Service</a>
        <a href="/contact"><i class="fa-solid fa-envelope"></i> Contact Us</a>
      </div>
    </footer>
  </main>

  <div class="popup" id="popup">
    <span class="popup-text" id="popup-text"></span>
    <button class="close-popup" id="close-popup">Close</button>
  </div>

  <!-- Volunteer Modal -->
  <div class="modal" id="volunteer-modal">
    <div class="modal-content">
      <span class="modal-close" onclick="closeVolunteerModal()">×</span>
      <h2><i class="fa-solid fa-handshake-angle"></i> Become a Volunteer</h2>
      <div class="volunteer-tabs">
        <button class="tab-btn active" onclick="showTab('individual')">
          Individual
        </button>
        <button class="tab-btn" onclick="showTab('create-org')">
          Create Org
        </button>
        <button class="tab-btn" onclick="showTab('join-org')">
          Join Org
        </button>
      </div>
      <div class="progress-bar">
        <div class="progress" id="progress"></div>
      </div>

      <!-- Individual Volunteer Form -->
      <form id="individual-form" class="volunteer-form active">
        <div class="form-step" data-step="1">
          <div class="input-group">
            <i class="fa-solid fa-user"></i>
            <input type="text" id="ind-name" placeholder="Full Name" required />
          </div>
          <div class="input-group">
            <i class="fa-solid fa-envelope"></i>
            <input type="email" id="ind-email" placeholder="Email" required />
          </div>
          <button type="button" class="next-btn" onclick="nextStep('individual', 2)">
            Next
          </button>
        </div>
        <div class="form-step hidden" data-step="2">
          <div class="input-group">
            <i class="fa-solid fa-phone"></i>
            <select id="ind-country-code" required>
              <option value="+1">+1 (US)</option>
              <option value="+91">+91 (IN)</option>
              <option value="+44">+44 (UK)</option>
            </select>
            <input type="tel" id="ind-phone" placeholder="Phone Number" required />
          </div>
          <div class="input-group">
            <i class="fa-solid fa-briefcase"></i>
            <input type="text" id="ind-skills" placeholder="Skills (e.g., Medical, Logistics)" required />
          </div>
          <button type="button" class="prev-btn" onclick="prevStep('individual', 1)">
            Previous
          </button>
          <button type="submit" class="submit-btn">Submit</button>
        </div>
      </form>

      <!-- Create Organization Form -->
      <form id="create-org-form" class="volunteer-form hidden">
        <div class="form-step" data-step="1">
          <div class="input-group">
            <i class="fa-solid fa-building"></i>
            <input type="text" id="org-name" placeholder="Organization Name" required />
          </div>
          <div class="input-group">
            <i class="fa-solid fa-envelope"></i>
            <input type="email" id="org-email" placeholder="Contact Email" required />
          </div>
          <button type="button" class="next-btn" onclick="nextStep('create-org', 2)">
            Next
          </button>
        </div>
        <div class="form-step hidden" data-step="2">
          <div class="input-group">
            <i class="fa-solid fa-map-marker-alt"></i>
            <input type="text" id="org-location" placeholder="Location" required />
          </div>
          <div class="input-group">
            <i class="fa-solid fa-file-alt"></i>
            <textarea id="org-description" placeholder="Description" required></textarea>
          </div>
          <button type="button" class="prev-btn" onclick="prevStep('create-org', 1)">
            Previous
          </button>
          <button type="submit" class="submit-btn">Submit</button>
        </div>
      </form>

      <!-- Join Organization Form -->
      <form id="join-org-form" class="volunteer-form hidden">
        <div class="form-step" data-step="1">
          <div class="input-group">
            <i class="fa-solid fa-search"></i>
            <input type="text" id="org-search" placeholder="Search Organizations" />
          </div>
          <div class="org-list" id="org-list">
            <!-- Populated dynamically -->
          </div>
          <button type="button" class="next-btn" onclick="nextStep('join-org', 2)">
            Next
          </button>
        </div>
        <div class="form-step hidden" data-step="2">
          <div class="input-group">
            <i class="fa-solid fa-user"></i>
            <input type="text" id="join-name" placeholder="Your Full Name" required />
          </div>
          <div class="input-group">
            <i class="fa-solid fa-envelope"></i>
            <input type="email" id="join-email" placeholder="Your Email" required />
          </div>
          <button type="button" class="prev-btn" onclick="prevStep('join-org', 1)">
            Previous
          </button>
          <button type="submit" class="submit-btn">Join</button>
        </div>
      </form>
    </div>
  </div>
  <div class="weather-widget" id="weatherWidget">
    <button class="close-btn2" id="close-btn2">Close</button>
    <h2 id="widgetCity">Loading...</h2>
    <div class="thumbnail-section">
      <img id="widgetIcon" src="" alt="Weather Icon" style="width: 60px" />
      <img id="weatherImage" class="weather-image" src="" alt="Current Weather" />
    </div>
    <div class="weather-info">
      <p id="widgetTemp"></p>
      <p id="widgetDescription"></p>
      <div id="widgetWeatherAlert" class="alert-bar"></div>
    </div>
    <div class="aqi-info">
      <p id="widgetAQI">AQI: Loading... | PM2.5: Loading...</p>
      <div id="widgetAQIAlert" class="alert-bar"></div>
    </div>
    <p id="crispyLine" class="crispy-line"></p>
    <button class="view-more" onclick="showDashboard()">View More</button>
  </div>

  <!-- Weather Dashboard -->
  <div class="weather-dashboard" id="weatherDashboard">
    <button class="close-btn" onclick="hideDashboard()">Close</button>
    <div class="dashboard-content">
      <h1>Weather & Air Quality Dashboard</h1>
      <div class="dashboard-section current-weather" id="currentWeather"></div>
      <hr class="section-separator" />
      <div class="dashboard-section additional-info" id="additionalInfo"></div>
      <hr class="section-separator" />
      <div class="dashboard-section forecast" id="forecast">
        <h2>Weather Forecast</h2>
        <div class="forecast-graph">
          <canvas id="tempChart"></canvas>
        </div>
        <div class="forecast-graph" style="margin-top: 20px">
          <canvas id="windChart"></canvas>
        </div>
        <div class="forecast-container" id="forecastContainer"></div>
      </div>
      <hr class="section-separator" />
      <div class="dashboard-section aqi" id="aqiReport"></div>
      <hr class="section-separator" />
      <div class="dashboard-section suggestions" id="suggestions"></div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://unpkg.com/scrollreveal"></script>
  <script src="/sidebar.js"></script>
  <script src="/firstPage.js"></script>
  <script src="/weather.js"></script>
</body>

</html>